[{"path":"http://www.michaellydeamore.com/blockstrap/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 flockstrapr authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/articles/egworkflow.html","id":"introduction-to-blockstrap","dir":"Articles","previous_headings":"","what":"Introduction to Blockstrap","title":"egworkflow","text":"Blockstrap R package developed resampling data structures naturally come blocks. common example line-listed hospital admission data, subject may appear multiple rows. rows can grouped meaningful units sequence visits subject occur close together. refer grouping block. Blockstrap provides tools perform block bootstrap, resampling blocks rather resampling individual rows independently traditional bootstrap. document, demonstrate : Create example line-listed dataset hospital admission context Partition dataset blocks Perform block bootstrap using slice_block() function","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/articles/egworkflow.html","id":"generate-an-example-dataset","dir":"Articles","previous_headings":"Introduction to Blockstrap","what":"Generate an example dataset","title":"egworkflow","text":"illustration, use create_fake_subjectDB() function HospitalNetwork package generate fake subject database containing admission/discharge records. , df contains four columns: sID: Subject ID fID: Facility ID Adate: Admission date visit Ddate: Discharge date visit","code":"library(HospitalNetwork) #> Loading required package: data.table #>  #> Attaching package: 'data.table' #> The following objects are masked from 'package:dplyr': #>  #>     between, first, last set.seed(1) df<- create_fake_subjectDB() df #>         sID    fID      Adate      Ddate #>      <char> <char>     <POSc>     <POSc> #>   1:   s001    f07 2019-01-23 2019-02-02 #>   2:   s001    f01 2019-03-07 2019-03-10 #>   3:   s002    f05 2019-02-24 2019-03-03 #>   4:   s002    f10 2019-03-25 2019-03-27 #>   5:   s002    f06 2019-04-23 2019-04-27 #>  ---                                     #> 227:   s098    f01 2019-02-25 2019-03-03 #> 228:   s099    f04 2019-01-27 2019-01-31 #> 229:   s100    f10 2019-02-04 2019-02-08 #> 230:   s100    f01 2019-03-19 2019-03-23 #> 231:   s100    f08 2019-05-04 2019-05-10"},{"path":"http://www.michaellydeamore.com/blockstrap/articles/egworkflow.html","id":"group-rows-into-blocks","dir":"Articles","previous_headings":"Introduction to Blockstrap","what":"Group rows into blocks","title":"egworkflow","text":"define block sequence visits subject occur close together, , new block begins : first record subject, difference days previous discharge (Ddate) current admission (Adate) exceeds 40 days column idx_block factor identifies block row belongs . Note rows share identical entries idx_block belong block.","code":"df2<- df |>     group_by(sID) |>   mutate( Adate = as.Date(Adate),           Ddate = as.Date(Ddate)) |>   arrange(Adate, .by_group= TRUE) |>   mutate( diff_time = Adate - lag(Ddate),           is_start = is.na(diff_time) | diff_time > 40,           idx_within_sid = cumsum(is_start),           idx_block = as.factor(paste0(sID, \"_\", idx_within_sid)))  df2 #> # A tibble: 231 × 8 #> # Groups:   sID [100] #>    sID   fID   Adate      Ddate      diff_time is_start idx_within_sid idx_block #>    <chr> <chr> <date>     <date>     <drtn>    <lgl>             <int> <fct>     #>  1 s001  f07   2019-01-23 2019-02-02 NA days   TRUE                  1 s001_1    #>  2 s001  f01   2019-03-07 2019-03-10 33 days   FALSE                 1 s001_1    #>  3 s002  f05   2019-02-24 2019-03-03 NA days   TRUE                  1 s002_1    #>  4 s002  f10   2019-03-25 2019-03-27 22 days   FALSE                 1 s002_1    #>  5 s002  f06   2019-04-23 2019-04-27 27 days   FALSE                 1 s002_1    #>  6 s003  f09   2019-02-08 2019-02-15 NA days   TRUE                  1 s003_1    #>  7 s003  f01   2019-03-26 2019-04-02 39 days   FALSE                 1 s003_1    #>  8 s004  f10   2019-01-30 2019-02-04 NA days   TRUE                  1 s004_1    #>  9 s004  f09   2019-02-19 2019-02-23 15 days   FALSE                 1 s004_1    #> 10 s004  f07   2019-03-29 2019-04-07 34 days   FALSE                 1 s004_1    #> # ℹ 221 more rows"},{"path":"http://www.michaellydeamore.com/blockstrap/articles/egworkflow.html","id":"block-bootstrap","dir":"Articles","previous_headings":"Introduction to Blockstrap","what":"Block bootstrap","title":"egworkflow","text":"block IDs defined, use slice_block() function perform block bootstrap. example,","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Michael Lydeamore. Author, maintainer. Cash Looi. Author. Kenyon Ng. Author.","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Lydeamore M, Looi C, Ng K (2025). blockstrap: Sample dataframes group. R package version 0.0.0.9000, http://www.michaellydeamore.com/blockstrap/.","code":"@Manual{,   title = {blockstrap: Sample dataframes by a group},   author = {Michael Lydeamore and Cash Looi and Kenyon Ng},   year = {2025},   note = {R package version 0.0.0.9000},   url = {http://www.michaellydeamore.com/blockstrap/}, }"},{"path":"http://www.michaellydeamore.com/blockstrap/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"Sample dataframes by a group","text":"","code":"# install.packages(\"devtools\") remotes::install_github(\"numbats/blockstrap\")"},{"path":"http://www.michaellydeamore.com/blockstrap/index.html","id":"motivation","dir":"","previous_headings":"","what":"Motivation","title":"Sample dataframes by a group","text":"observations belonging experimental unit spread across multiple rows (e.g. multiple measurements per subject, dose combinations, time series segments), ordinary row-wise sampling breaks units apart. block sampler keeps units intact sampling group level.","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/index.html","id":"core-function","dir":"","previous_headings":"","what":"Core function","title":"Sample dataframes by a group","text":"slice_block() works grouped data frame. call ungrouped data frame, throws helpful error. Key arguments: n: number groups (blocks) sample. replace: sample replacement? Needed n exceeds number groups. weight_by: optional expression (unquoted) evaluated per-group weight sampling probabilities. ...: passed base sample()","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/index.html","id":"basic-example","dir":"","previous_headings":"","what":"Basic example","title":"Sample dataframes by a group","text":"use built-ToothGrowth dataset treat supplement-dose combination block.","code":"library(dplyr) library(blockstrap)  set.seed(1) ToothGrowth |>   group_by(supp, dose) |>   slice_block(n = 2) ## # A tibble: 20 × 3 ## # Groups:   supp, dose [2] ##      len supp   dose ##    <dbl> <fct> <dbl> ##  1  15.2 OJ      0.5 ##  2  21.5 OJ      0.5 ##  3  17.6 OJ      0.5 ##  4   9.7 OJ      0.5 ##  5  14.5 OJ      0.5 ##  6  10   OJ      0.5 ##  7   8.2 OJ      0.5 ##  8   9.4 OJ      0.5 ##  9  16.5 OJ      0.5 ## 10   9.7 OJ      0.5 ## 11   4.2 VC      0.5 ## 12  11.5 VC      0.5 ## 13   7.3 VC      0.5 ## 14   5.8 VC      0.5 ## 15   6.4 VC      0.5 ## 16  10   VC      0.5 ## 17  11.2 VC      0.5 ## 18  11.2 VC      0.5 ## 19   5.2 VC      0.5 ## 20   7   VC      0.5"},{"path":"http://www.michaellydeamore.com/blockstrap/index.html","id":"sampling-with-replacement","dir":"","previous_headings":"","what":"Sampling with replacement","title":"Sample dataframes by a group","text":"want sample groups exist, allow repeats: Repeated blocks appear multiple times (row counts summed accordingly).","code":"ToothGrowth |>   group_by(supp, dose) |>   slice_block(n = 10, replace = TRUE) |>   count(supp, dose) ## # A tibble: 5 × 3 ## # Groups:   supp, dose [5] ##   supp   dose     n ##   <fct> <dbl> <int> ## 1 OJ      0.5    20 ## 2 OJ      1      20 ## 3 OJ      2      30 ## 4 VC      1      20 ## 5 VC      2      10"},{"path":"http://www.michaellydeamore.com/blockstrap/index.html","id":"weighted-sampling","dir":"","previous_headings":"","what":"Weighted sampling","title":"Sample dataframes by a group","text":"Weight blocks statistic, e.g. mean tooth length, favor larger mean response groups: can verify weighting bias repeating tallying frequencies:","code":"set.seed(42) weighted <- ToothGrowth |>   group_by(supp, dose) |>   slice_block(n = 3, weight_by = mean(len)) set.seed(99) rep_draws <- replicate(500, {   ToothGrowth |> group_by(supp, dose) |> slice_block(n = 3, weight_by = mean(len)) |> distinct(supp, dose) }, simplify = FALSE)  freqs <- bind_rows(rep_draws) |> count(supp, dose, name = \"times\") |> arrange(desc(times)) freqs ## # A tibble: 6 × 3 ## # Groups:   supp, dose [6] ##   supp   dose times ##   <fct> <dbl> <int> ## 1 OJ      2     334 ## 2 VC      2     326 ## 3 OJ      1     292 ## 4 VC      1     224 ## 5 OJ      0.5   205 ## 6 VC      0.5   119"},{"path":"http://www.michaellydeamore.com/blockstrap/reference/slice_block.html","id":null,"dir":"Reference","previous_headings":"","what":"Sample complete groups from a data frame — slice_block","title":"Sample complete groups from a data frame — slice_block","text":"Samples complete groups grouped data frame, including group part sample. Can considered form grouped bootstrap sampling.","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/reference/slice_block.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sample complete groups from a data frame — slice_block","text":"","code":"slice_block(.data, ...)  # S3 method for class 'data.frame' slice_block(.data, ...)  # S3 method for class 'grouped_df' slice_block(.data, n = 1, replace = FALSE, weight_by = NULL, ...)"},{"path":"http://www.michaellydeamore.com/blockstrap/reference/slice_block.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sample complete groups from a data frame — slice_block","text":".data grouped data frame, generated using [dplyr::group_by](dplyr::group_by) ... Additional arguments passed methods n Number samples draw replace sampling done replacement? weight_by Optional expression weight groups (unquoted name)","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/reference/slice_block.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sample complete groups from a data frame — slice_block","text":"data frame sampled complete groups","code":""},{"path":"http://www.michaellydeamore.com/blockstrap/reference/slice_block.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sample complete groups from a data frame — slice_block","text":"","code":"ToothGrowth |>    dplyr::group_by(supp, dose) |>    slice_block(n = 2) #> # A tibble: 20 × 3 #> # Groups:   supp, dose [2] #>      len supp   dose #>    <dbl> <fct> <dbl> #>  1   4.2 VC      0.5 #>  2  11.5 VC      0.5 #>  3   7.3 VC      0.5 #>  4   5.8 VC      0.5 #>  5   6.4 VC      0.5 #>  6  10   VC      0.5 #>  7  11.2 VC      0.5 #>  8  11.2 VC      0.5 #>  9   5.2 VC      0.5 #> 10   7   VC      0.5 #> 11  16.5 VC      1   #> 12  16.5 VC      1   #> 13  15.2 VC      1   #> 14  17.3 VC      1   #> 15  22.5 VC      1   #> 16  17.3 VC      1   #> 17  13.6 VC      1   #> 18  14.5 VC      1   #> 19  18.8 VC      1   #> 20  15.5 VC      1"}]
